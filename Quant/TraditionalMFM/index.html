
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>资本资产定价模型CAPM &#8212; FinX Lab</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-examples.css?v=e236af4b" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.bundle.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-shadow.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-punk.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-noir.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-light.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-borderless.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/micromodal.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script src="../../_static/tabs.js?v=3ee01567"></script>
    <script src="../../_static/js/hoverxref.js"></script>
    <script src="../../_static/js/tooltipster.bundle.min.js"></script>
    <script src="../../_static/js/micromodal.min.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Quant/TraditionalMFM/index';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../Home/home.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/me.jpg" class="logo__image only-light" alt="FinX Lab - Home"/>
    <script>document.write(`<img src="../../_static/me.jpg" class="logo__image only-dark" alt="FinX Lab - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../Home/home.html">
                    FinX Lab
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../AboutMe/%E7%9B%AE%E5%BD%95.html">About Me</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../AboutMe/Events/article.html">Events</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../NLP/%E7%9B%AE%E5%BD%95.html">NLP</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../NLP/241128-%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B%E8%BF%9B%E8%A1%8C%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB/article.html">使用 DistilBERT 进行情感分析：基于预训练模型的实战</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../NLP/241130-%E6%96%87%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%9F%A2%E9%87%8F%E5%8C%96%E4%B8%8EKeras%E4%B8%AD%E7%9A%84Tokenizer%E4%BD%BF%E7%94%A8/article.html">文本数据矢量化与Keras中的Tokenizer使用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../NLP/241224-Word-metric%20method%20VS%20Semantic%20measure/article.html">Word-metric methods VS Semantic Models</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../FinancialEconomics/%E7%9B%AE%E5%BD%95.html">Financial Economics</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../FinancialEconomics/240410-KPPS%20H-Step-Ahead%20Forecast%20Error%20Variance%20Decomposition/article.html">KPPS H-Step-Ahead Forecast Error Variance Decomposition(FEVD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../FinancialEconomics/240620-KPPS%20H%E6%AD%A5%E9%A2%84%E6%B5%8B%E8%AF%AF%E5%B7%AE%E6%96%B9%E5%B7%AE%E5%88%86%E8%A7%A3%E7%9A%84Python%E5%AE%9E%E7%8E%B0/article.html">KPPS H步预测误差方差分解的Python实现</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../FinancialEconomics/240717-%E5%87%A0%E7%A7%8D%E6%B3%A2%E5%8A%A8%E7%8E%87%E7%9A%84%E8%AE%A1%E7%AE%97/article.html">几种波动率的计算</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../FinancialEconomics/230501-DY%20method/article.html">Diebold&amp;Yilmaz method</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../FinancialEconomics/230501-DCC-GARCH%E7%9A%84R%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0/article.html">DCC-GARCH的R语言实现</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Networks/%E7%9B%AE%E5%BD%95.html">Networks</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Networks/240718-%E7%BD%91%E7%BB%9C%E7%9A%84%E7%9B%B8%E5%85%B3%E6%80%A7%E5%9B%BE%E7%BB%98%E5%88%B6/article.html">网络的相关性图绘制</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Networks/240721-%E5%9F%BA%E4%BA%8EiGraph%E7%9A%84%E7%BD%91%E7%BB%9C%E5%88%86%E6%9E%90%E5%92%8C%E7%BB%98%E5%9B%BE/article.html">基于iGraph的网络分析和绘图</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Networks/240723-%E5%A6%82%E4%BD%95%E7%BB%98%E5%88%B6%E5%9C%B0%E7%90%86%E5%9B%BE/article.html">如何绘制地理图</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Networks/240805-%E5%9F%BA%E4%BA%8ENetworkx%E7%9A%84%E7%BD%91%E7%BB%9C%E5%88%86%E6%9E%90%E5%92%8C%E7%BB%98%E5%9B%BE/article.html">基于Networkx的网络分析和绘图</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../%E7%9B%AE%E5%BD%95.html">Quant</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../230501-%E5%90%91%E9%87%8F%E5%8C%96%E5%9B%9E%E6%B5%8B%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%AE%BE%E8%AE%A1/article.html">向量化回测系统的设计</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/Quant/TraditionalMFM/index.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>资本资产定价模型CAPM</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">资本资产定价模型CAPM</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#mfm">多因子模型MFM</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">历史上有哪些主流的多因子模型？</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">如何比较不同的多因子模型？</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">多因子模型的风险</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">多因子模型风险分解</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#alpha">什么是Alpha?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">多因子模型的构建</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">因子的准备</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">数据采集</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">数据标准化</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">有效因子</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#t">因子收益率序列<span class="math notranslate nohighlight">\(t\)</span>检验</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ic">因子IC值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">因子打分法回测</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">共线性的问题</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">残差异方差分析</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">多元线性回归</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">估计因子预期收益率</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">计算股票预期收益</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">多因子模型的风险分解</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">投资组合风险预测</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">优化模型</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">二次规划</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">收益目标和风险目标</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#reference">Reference</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <p>#多因子模型</p>
<p>[TOC]</p>
<p>Version: 2.0 Oct, 2019</p>
<section id="capm">
<h1>资本资产定价模型CAPM<a class="headerlink" href="#capm" title="Link to this heading">#</a></h1>
<p>Reference:</p>
<ul class="simple">
<li><p>Black, F., M. C. Jensen, and M. Scholes (1972). The Capital Asset Pricing Model: Some empirical Tests. In <em>Michael Jensen, Ed., Studies in the Theory of Capital Markets</em>, Praeger, New York NY.</p></li>
</ul>
</section>
<section id="mfm">
<h1>多因子模型MFM<a class="headerlink" href="#mfm" title="Link to this heading">#</a></h1>
<p>APT (Arbitrage Pricing Theory) model believes that arbitrage behaviour is a decisive factor in the formation of modern effective market (namely market equilibrium price state). If the market does not reach equilibrium state, there will be risk-free arbitrage opportunities in the market, and arbitrage behaviour will make the market return to equilibrium state.</p>
<p>APT（Arbitrage Pricing Theory）模型认为，套利行为是现代有效市场(即市场均衡价格)形成的一个决定因素，如果市场未达到均衡状态的话，市场上就会存在无风险套利机会，套利行为会使得市场重新回到均衡状态。</p>
<p>According to Wikipedia, “In <a class="reference external" href="https://en.wikipedia.org/wiki/Mathematical_finance">mathematical finance</a>, <strong>multiple factor models</strong> are <a class="reference external" href="https://en.wikipedia.org/wiki/Valuation_(finance)">asset pricing</a> models that can be used to estimate the <a class="reference external" href="https://en.wikipedia.org/wiki/Discounted_cash_flow">discount rate</a> for the valuation of financial assets. They are generally extensions of the single-factor <a class="reference external" href="https://en.wikipedia.org/wiki/Capital_asset_pricing_model">capital asset pricing model</a>(CAPM)”.</p>
<p>The multi-factor model quantifies the linear relationship between the expected stock return rate and the stock’s factor load (risk exposure) on each factor, as well as the factor return rate per unit factor load (risk exposure) on each factor. For stock j:</p>
<p>多因子模型定量刻画了股票预期收益率与股票在每个因子上的因子载荷(风险敞口)，以及每个因子每单位因子载荷(风险敞口)的因子收益率之间的线性关系。对于股票<span class="math notranslate nohighlight">\(j\)</span>:
$<span class="math notranslate nohighlight">\(
\widetilde{r}_j = \sum^k_{k=1}X_{jk}*\widetilde{f}_k+\widetilde{u}_j\\
X_{jk}:股票j在因子k上的因子暴露（因子载荷）\\
\widetilde{f}_k:因子k的因子收益\\
\widetilde{u}_j：股票j的残差收益率
\)</span>$
The essence of the multi-factor model is to convert the return - risk prediction for N stocks into the return - risk prediction for K factors, and convert the covariance matrix for estimating the return rate of a single stock into the covariance matrix for estimating the return rate of factors.</p>
<p>多因子模型的本质是将对N只股票的收益-风险预测转变为对于K个因子的收益-风险预测，将估算个股收益率的协方差矩阵转换为估算因子收益率的协方差阵。</p>
<p>假设一个投资组合由N个股票组成，它们在组合中的权重分别是<span class="math notranslate nohighlight">\(h_{P1},h_{P2},\cdots,h_{PN}\)</span>，则组合的收益率为
$<span class="math notranslate nohighlight">\(
\widetilde{r}_P = \sum^k_{k=1}X_{Pk}*\widetilde{f}_k+\sum_{j=1}^Nh_{Pj}*\widetilde{u}_j\\
其中，X_{Pk}=\sum_{j=1}^Nh_{Pj}*X_{jK}
\)</span>$</p>
<section id="id1">
<h2>历史上有哪些主流的多因子模型？<a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<p>依据简约法则，学术界主流的多因子模型包括以下几个（按时间顺序、排名不分先后，不完整 list），它们的因子个数均在 3 到 5 个之间：</p>
<ul class="simple">
<li><p>**Fama-French 三因子模型（Fama and French 1993）：**多因子模型的开山鼻祖，包括 MKT，HML 以及 SMB 三因子。</p></li>
<li><p>**Carhart 四因子模型（Carhart 1997）：**在 Fama-French 三因子模型上加上了动量 MOM 因子。</p></li>
<li><p>**Novy-Marx 四因子模型（Novy-Marx 2013）：**包含 MKT，HML，MOM 以及 PMU 四个因子；其中 PMU 所用的财务指标是 Gross Profit-to-Asset，代表 profitability 维度。</p></li>
<li><p>**Fama-French 五因子模型（Fama and French 2015）：**Fama 和 French 在其三因子模型的基础上加入了 CMA 和 RMW 两个因子，分别代表 investment 和 profitability 两个维度。</p></li>
<li><p>**Hou-Xue-Zhang 四因子模型（Hou, Xue and Zhang 2015）：**包含 MKT，SMB，IVA 以及 ROE；其中 IVA 是 total assets 的年增长率，代表 investment 维度。</p></li>
<li><p>**Stambaugh-Yuan 四因子模型（Stambaugh and Yuan 2016）：**包含 MKT，SMB，MGMT 和 PERF 四个因子。MGMT 和 PERF 分别使用了 6 个和 5 个指标，代表和 management 以及 performance 相关的两个 mispricing 因子。虽然该模型只有四个因子，但它用到的基本面和量价指标多达 12 个。</p></li>
<li><p>**Daniel-Hirshleifer-Sun 三因子模型（Daniel, Hirshleifer and Sun 2018）：**在 MKT 的基础上，使用 PEAD 和 FIN 两个指标作为短期和长期行为因子（behavioral factors）的代理指标，构建了三因子模型。该模型由于包括了传统的 MKT 风险因子，又包括行为因子，故称为复合模型。</p></li>
</ul>
</section>
<section id="id2">
<h2>如何比较不同的多因子模型？<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<p>https://zhuanlan.zhihu.com/p/56614427</p>
</section>
<section id="id3">
<h2>多因子模型的风险<a class="headerlink" href="#id3" title="Link to this heading">#</a></h2>
<p>对于一个包含N只股票和K个因子的系统，多因子模型本质上是将对于N只股票的收益-风险预测转变成了对于K个因子的收益—风险预测。
$<span class="math notranslate nohighlight">\(
\begin{bmatrix}
{\widetilde{r_1}}\\
{\widetilde{r_2}}\\
{\vdots}\\
{\widetilde{r_N}}\end{bmatrix}=
\begin{bmatrix}
{X_{11}}&amp;{X_{12}}&amp;{\cdots}&amp;{X_{1k}}\\
{X_{21}}&amp;{X_{22}}&amp;{\cdots}&amp;{X_{2k}}\\
{\vdots}&amp;{\vdots}&amp;{\ddots}&amp;{\vdots}\\
X_{N1}&amp;X_{N2}&amp;{\dots}&amp;X_{NK}\end{bmatrix}
\begin{bmatrix}
{\widetilde{f_1}}\\
{\widetilde{f_2}}\\
{\vdots}\\
{\widetilde{f_K}}\end{bmatrix}+
\begin{bmatrix}
{\widetilde{u_1}}\\
{\widetilde{u_2}}\\
{\vdots}\\
{\widetilde{u_N}}\end{bmatrix}
\)</span>$
多因子模型极大的降低了预测工作量，以一个1000只股票和20个因子组成系统而言，预测从1000只股票的预期收益和风险转换为对20个因子的预期收益和风险的预测。随着预测复杂程度的降低，预测的精度大幅提升。特别是对于风险的预测，前面已经提到过，若对1000只股票估计协方差矩阵，我们需要预测𝑁 ∗ (𝑁 − 1)/2 = 4950个相关系数。协方差矩阵中包含的独立参数太多，如果采用历史数据的样本方差和协方差，估计值既不稳定也不合理。因为采用历史数据进行估计，采样时间长度为𝑇，要求𝑇 &gt; 𝑁(即𝑇 &gt; 1000)。按照多因子模型最常规的月度频率，需要的数据超过80年，这显然不现实，同时也不合理，因为公司基本面数据是在不断发生变化的。</p>
<section id="id4">
<h3>多因子模型风险分解<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>市场风险(Market Risk)： 所有的股票都会受到市场整体供需的影响而呈现出同涨同
跌的现象，即我们所说的牛市和熊市。这是所有类别的风险中波及面最广，影响最大的
风险;</p></li>
<li><p>行业风险(Sector Risk):从事相同或者相似业务公司的股票，由于受到共同的产业
景气周期影响、或者共同的产业政策冲击、抑或是其他宏观环境的影响，在市场上也会
表现出较高的相关性;</p></li>
<li><p>风格风险(Style Risk):风格风险是指剔除掉市场风险和行业风险之后，股票市场的
结构表现在一定的时期内会呈现出很强烈的风格特征，比如小市值股票表现更优的小市
值风格，前期收益低的股票近期收益更高的反转风格，成长性高的股票表现更好地成长
风格，或者是低估值股票表现更好地低估值风格等等。主要的风格因子暂时分成十二大类:估值因子(Value Factor)、成长因子(Growth Factor)、财务质量因子(Financial Quality Factor)、杠杆因子(Leverage Factor)、规模因子(SizeFactor)、动量因子(Momentum Factor)、波动率因子(Volatility Factor)、换手率因子(Turnover Factor)、改进的动量因子(Modified Momentum Factor)、分析师情绪因子(Sentiment Factor)、股东因子(Shareholder Factor)和技术因子(Technical Factor)。</p></li>
</ol>
</section>
</section>
<section id="alpha">
<h2>什么是Alpha?<a class="headerlink" href="#alpha" title="Link to this heading">#</a></h2>
<p>Alpha用来衡量一个在风险调整下由投资所产生的”主动收益”（超过市场收益）。如今，任何投资者都可以通过购买指数型基金实现与整体市场相近的回报，而且只需要支付非常低的手续费，同时投资者无需做投资分析和市场研究。</p>
<p>[Richard Tortoriello] 认为一个略微超越市场甚至与之具有相同回报率的投资策略是没有投资价值的。此外，由于统计检验结果会随测试时间段的变化而产生比较显著的误差率，所以一个在少于60%的时间段内略微战胜/输给市场的测试结果是非常值得怀疑的。</p>
<p>[Barra Handbook USE3]定义卓越的投资表现为</p>
<ul class="simple">
<li><p>收益预测:形成合理并且有效的收益预期;</p></li>
<li><p>风险控制:在谨慎的前提下捕捉市场机会;</p></li>
<li><p>过程控制:监控整个投资过程以保持投资生产上的一致性;</p></li>
<li><p>成本控制:避免过度或者无效率的交易侵蚀投资利润。</p></li>
</ul>
<p><img alt="image-20190614154226138" src="Users/Hans/Library/Application%20Support/typora-user-images/image-20190614154226138.png" /></p>
<p>在MFM框架下，Alpha 和 Beta 是相辅相成的，分别是使用线性回归将组合收益率分解为与业绩基准相关的部分和业绩基准不相关的残差部分。如果<span class="math notranslate nohighlight">\(r_P(t)\)</span>是投资组合在时点𝑡 = 1, 2, 3, ⋯ , 𝑇上的超额收益率，<span class="math notranslate nohighlight">\(r_B(t)\)</span>是业绩基准在同时期的超额收益率，那么回归模型为:
$<span class="math notranslate nohighlight">\(
r_p(t) = \alpha_P+\beta_P*r_B(t)+\varepsilon_P(t)
\)</span><span class="math notranslate nohighlight">\(
利用回归分析计算出来的\)</span>\beta_P<span class="math notranslate nohighlight">\(和\)</span>\alpha_P<span class="math notranslate nohighlight">\(的估计值称为实现的或者历史的 Beta 和 Alpha。组合P的残差收益率是： 
\)</span><span class="math notranslate nohighlight">\(
\theta_P(t) = \alpha_P + \varepsilon_P(t)
\)</span><span class="math notranslate nohighlight">\(
\)</span>\alpha_P<span class="math notranslate nohighlight">\(是平均残差收益率，\)</span>\varepsilon_P(t)$残差收益率中均值为零的随机项。</p>
<p>根据定义，业绩基准组合的残差收益率总是等于零，即𝜃𝐵 = 0总是成立。因此，业绩基准组合的 Alpha 必然等于零，即𝛼𝐵 = 0。为了保证𝛼𝐵 = 0，我们要求股票层面的 Alpha 列向量满足业绩基准中性的约束。</p>
<p>随着不断发现新的风险因子，投资组合收益中越来越多的部分被划分为 <img alt="公式" src="https://www.zhihu.com/equation?tex=%5Cbeta" /> 部分；相应的 <img alt="公式" src="https://www.zhihu.com/equation?tex=%5Calpha" /> 部分就越来越少。如下图所示，自风险因子流行以来的 30 年里，投资组合（或者个股）的收益率的很大一部分已经被市场 <img alt="公式" src="https://www.zhihu.com/equation?tex=%5Cbeta" /> （包括国家和行业）、风格因子 <img alt="公式" src="https://www.zhihu.com/equation?tex=%5Cbeta" /> （包括价值因子、质量因子、动量因子等）、以及策略因子 <img alt="公式" src="https://www.zhihu.com/equation?tex=%5Cbeta" /> （即通过有效配置风格因子）来解释。</p>
<p><img alt="img" src="https://pic1.zhimg.com/80/v2-0a02cd709e86e44f1da90c3f0c4289e0_hd.jpg" /></p>
</section>
<section id="id5">
<h2>多因子模型的构建<a class="headerlink" href="#id5" title="Link to this heading">#</a></h2>
</section>
<section id="id6">
<h2>因子的准备<a class="headerlink" href="#id6" title="Link to this heading">#</a></h2>
<section id="id7">
<h3>数据采集<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<p>基础数据采集:首先需要确定原始因子集合，然后按照原始因子集合逐个进行因子
原始数据的采集和计算工作;</p>
<p>估值因子(Value Factor)、成长因子(Growth Factor)、财务质量因子(Financial Quality Factor)、杠杆因子(Leverage Factor)、规模因子(Size Factor)、动量因子(Momentum Factor)、波动率因子(Volatility Factor)、换手率因子(Turnover Factor)、改进的动量因子(Modified Momentum Factor)、分析师情绪因子(Sentiment Factor)、股东因子(Shareholder Factor)和技术因子(Technical Factor)</p>
</section>
<section id="id8">
<h3>数据标准化<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<p>首先将因子载荷原始值转换为排序值，然后再进行标准化</p>
</section>
<section id="id9">
<h3>有效因子<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<p>仅纳入行业因子，而将市场因子包含在行业因子中。
$<span class="math notranslate nohighlight">\(
\widetilde{r}_j^t = \sum^s_{s=1}X_{js}^t*\widetilde{f_s^t}+X_{jk}^t*\widetilde{f_k^t}+\widetilde{u_j^t}\\
\widetilde{r}_j^t:股票j在第t期的收益率\\
X_{js}^t:股票j在第t期在行业s上的暴露\\
\widetilde{f_s^t}:行业s在第t期的收益率\\
X_{jk}^t:股票j在第t期在因子k上的暴露\\
\widetilde{f_k^t}:因子k在第t期的收益率\\
\widetilde{u_j^t}:股票j的残差收益率
\)</span><span class="math notranslate nohighlight">\(
\)</span>X{js}^t<span class="math notranslate nohighlight">\( 是一个0 − 1哑变量，即如果股票\)</span>j<span class="math notranslate nohighlight">\(属于行业\)</span>s$，则暴露度为1，否则为0。在有的模型中，会对公司所属行业进行拆分，比如公司𝑗的业务50%属于行业𝑎，30%属于行业𝑏，20%属于行业𝑐，则股票𝑗在行业𝑎的暴露度为0.5，在行业𝑏的暴露度为0.3，在行业𝑐的暴露度为0.2。</p>
</section>
<section id="t">
<h3>因子收益率序列<span class="math notranslate nohighlight">\(t\)</span>检验<a class="headerlink" href="#t" title="Link to this heading">#</a></h3>
<p><span class="math notranslate nohighlight">\(\widetilde{f_s^t}\)</span>是因子k在第t期的因子收益，为确定因子k在第t期是否和股票收益率显著相关，即<span class="math notranslate nohighlight">\(\widetilde{f_s^t}\)</span>是否显著不等于0，我们需要对<span class="math notranslate nohighlight">\(\widetilde{f_s^t}\)</span>进行t检验：
$<span class="math notranslate nohighlight">\(
t=\frac{\overline{x}-u}{\sigma/\sqrt{n-1}}\\
t:x的t统计量\\
\overline{x}:样本均值\\
u:总体的均值\\
\sigma:样本的标准差\\
n:样本的容量
\)</span><span class="math notranslate nohighlight">\(
\)</span>t<span class="math notranslate nohighlight">\(值绝对值序列的均值：对于每一期的截面回归，都可以得到一个因子收益率\)</span>\widetilde{f_k^t}<span class="math notranslate nohighlight">\(的t值。对于t值序列，首先取绝对值，然后计算\)</span>|t|<span class="math notranslate nohighlight">\(的均值，\)</span>|t|$是判断因子是否为有效因子的重要指标。</p>
<p>和收益率存在很明显相关性的因子，满足前面<span class="math notranslate nohighlight">\(t\)</span>的第一点和第二点。根据第三点，将有效因子分成收益类因子和风险类因子。</p>
<ul class="simple">
<li><p>收益类因子:即因子收益率<span class="math notranslate nohighlight">\(\widetilde{f_k^t}\)</span> 序列的<span class="math notranslate nohighlight">\(t\)</span>值显著不等于0，因子收益率的方向性相对明确，这类型的因子，用历史序列对下一期的因子收益进行预测时，相对比较准确，所以称之为收益类因子。</p></li>
<li><p>风险类因子:即因子收益率<span class="math notranslate nohighlight">\(\widetilde{f_k^t}\)</span> 序列的<span class="math notranslate nohighlight">\(t\)</span>值在0附近，因子收益率的方向性相对不明确，这类型的因子，用历史序列对下一期的因子收益进行预测时，风险比较大，所以称之为风险类因子。收益类因子是多因子模型超额收益的主要来源，在模型中是需要风险暴露相对多的因子。而风险类因子也需要重点关注，因为风险类因子是进行风险控制的重点，需要风险暴露尽量少。</p></li>
</ul>
</section>
<section id="ic">
<h3>因子IC值<a class="headerlink" href="#ic" title="Link to this heading">#</a></h3>
<p>在实际计算中，因子𝑘的 IC 值一般是指个股第𝑇期在因子𝑘上的暴露度与𝑇 + 1期的收益率的 相关系数。因子 IC 值反映的是个股下期收益率和本期因子暴露度的线性相关程度，是使用 该因子进行收益率预测的稳健性;而回归法中计算出的因子收益率本质上是一个斜率，反映 的是从该因子可能获得的收益的大小，这并不能代表任何关于稳健性的信息。 举个例子，票池里5只个股第𝑇期在动量因子上的暴露度为−2、−1、0、1、2，假设它们第𝑇 + 1 期收益率为−0.2、−0.1、0、0.1、0.2，则因子 IC 值为1，因子收益率为0.1;假设它们第𝑇 + 1期收 益率为−0.4、−0.2、0、0.2、0.4，则因子 IC 值为1，因子收益率为0.2。而因子𝑡值某种程度 上反映的也是稳健性信息，在上述举例的两种简单情形下，因子𝑡值都是正无穷。但是在更 复杂的包括其它因子和行业哑变量的多元线性回归模型中，因子𝑡值和 IC 的关系也随之变得 复杂，无法用确定的公式表示，只能说它们之间具有某种正相关关系。在我们的后续多因子 报告中会有更为详细的数学推导论述，欢迎继续关注。
在利用 IC 值评价因子有效性时，可以预先对因子进行提纯，排除行业、市值等重要因素的 影响，使结果更明晰。具体来说，就是在因子标准化处理之后，在每个截面期上用其做因变 量对市值因子及行业因子等做线性回归，取残差作为因子值的一个替代，这种做法可以消除 因子在行业、板块、市值等方面的偏离。例如，股息率因子较高的个股可能较多分布在电力 及公用事业、汽车、商贸零售等行业以及大市值板块，经过因子提纯之后，股息率因子较高 的个股就会平均分布在各行业及板块了。
当得到各因子 IC 值序列后，我们可以仿照上一小节𝑡检验的分析方法进行计算:</p>
<ol class="arabic simple">
<li><p>IC 值序列的均值及绝对值均值:判断因子有效性;</p></li>
<li><p>IC 值序列的标准差:判断因子稳定性;</p></li>
<li><p>IC 值序列大于零(或小于零)的占比:判断因子效果的一致性。</p></li>
</ol>
</section>
<section id="id10">
<h3>因子打分法回测<a class="headerlink" href="#id10" title="Link to this heading">#</a></h3>
<p>依照因子值对股票进行打分，构建投资组合回测，是最直观的衡量指标优劣的手段。具体来 说，在某个截面期上，可以根据一个或几个因子值对个股进行打分，将所有个股依照分数进 行排序，然后分为𝑁个投资组合，进行回测。
构建方法详细说明如下:</p>
<ol class="arabic simple">
<li><p>股票池、回溯区间、截面期(换仓期)可均与回归法相同;</p></li>
<li><p>选取一个基准组合(比如沪深300)，将所有个股在各个行业内按照得分进行排序， 每个行业内按得分从高到低分成𝑁个组合，每个行业内的每个组合中股票按流通市值配 比，然后将各行业的𝑁个组合中序数相同的组合结合在一起(最后一共形成𝑁个组合)， 组合内行业间权重按沪深300配比。以上这种构造方法得到的𝑁个组合为行业中性组合。 也可以选择不做行业中性，直接在全股票池中不分行业按得分高低分成𝑁个组合，每个 组合中的股票等权配比或按流通市值配比。</p></li>
<li><p>评价方法:回测年化收益率、年化波动率、夏普比率、最大回撤、胜率(分时间、分 行业胜率)等。</p></li>
</ol>
<p>一般来说，对于比较有效的因子(如市净率)，分成3~5层进行回测，各个投资组合的最终 净值一般可以保序。分成𝑁层(𝑁 &gt; 5)进行回测时，可以用最终净值的秩相关系数来衡量 因子的优劣(秩相关系数的绝对值越接近1时效果越好)。</p>
</section>
<section id="id11">
<h3>共线性的问题<a class="headerlink" href="#id11" title="Link to this heading">#</a></h3>
<p>多因子模型强调因子本身的经济含义和实证有效性两个方面。在因子搜集的时候就会根据因
子的具体经济含义对因子进行大类划分，但是同类型的因子可能存在较强的相关性，多元线
性回归的时候会造成多重共线性(Multicollinearity)，多重共线性是指回归模型中的解释变
量之间由于存在精确相关关系或高度相关性而使模型估计失真或者难以估计准确。
所以在有效因子筛选出来之后，我们首先需要根据大类对因子的相关性进行𝑡检验，对于相
关性较高的因子，要么舍弃显著性较低的因子，要么进行因子合成。</p>
<p>step 1：同类型因子的相关性检验</p>
<p>同类型的K候选因子，向前选取M个月的数据作为样本：</p>
<ol class="arabic">
<li><p>按月计算出因子载荷之间的相关系数矩阵和每个因子的因子收益率；
$<span class="math notranslate nohighlight">\(
\rho^t=
\begin{bmatrix}
{1}&amp;{\rho_{12}^t}&amp;{\cdots}&amp;{\rho_{1k}^t}\\
{\rho_{21}^t}&amp;{1}&amp;{\cdots}&amp;{{\cdots}}\\
{\vdots}&amp;{\vdots}&amp;{\ddots}&amp;{\vdots}\\
\rho_{K1}^t&amp;\dots&amp;{\dots}&amp;1\end{bmatrix}
\)</span>$</p>
<div class="math notranslate nohighlight">
\[\begin{split}
   f^t =
   \begin{bmatrix}
   {\widetilde{f_1^t}}\\
   {\widetilde{f_2^t}}\\
   {\vdots}\\
   {\widetilde{f_K^t}}\end{bmatrix}
   \end{split}\]</div>
</li>
<li><p>然后根据𝑀个月的相关系数进行检验，检验的方法包括相关系数绝对值的均值、中位数、𝑡检验等方式。</p></li>
</ol>
<div class="math notranslate nohighlight">
\[\begin{split}
\sum^M_{t=1}|\rho_{ij}^t|/M\\
median(|\rho_{ij}^t|), t=1,2,\cdots,M\\
t=\frac{\overline{|\rho^t_{ij}|}-u}{\sigma/\sqrt{M-1}}
\end{split}\]</div>
<p>step2: 筛选因子</p>
<p>对于相关性较高的因子集合，采取两种方式处理：</p>
<ol class="arabic simple">
<li><p>因子本身的有效性进行排序，挑选最有效的因子进行保留，删除其他因子；</p></li>
<li><p>合成并保留有效因子信息；</p>
<ul class="simple">
<li><p>等权重法</p></li>
<li><p>收益率加权法</p></li>
<li><p>信息系数IC加权法</p></li>
</ul>
</li>
</ol>
</section>
<section id="id12">
<h3>残差异方差分析<a class="headerlink" href="#id12" title="Link to this heading">#</a></h3>
<p>线性回归模型的一个重要假定：总体回归函数中的随机误差项满足同方差性，否则线性回归模型存在异方差性。
$<span class="math notranslate nohighlight">\(
\widetilde{r_j}=\sum_{K=1}^KX_{jK}*\widetilde{f_K}+\widetilde{u_j}
\)</span><span class="math notranslate nohighlight">\(
如果残差项的条件方差相同，即\)</span>Var(\widetilde{u_j}|X_{j1},X_{j2},\cdots,X_{jK})=\sigma^2<span class="math notranslate nohighlight">\(，则称为同方差性;
如果残差项的条件方差不相同，即\)</span>Var(\widetilde{u_j}|X_{j1},X_{j2},\cdots,X_{jK})=\sigma_j^2$，则称为异方差性。</p>
<p>异方差性对普通最小二乘法(Ordinary Least Square，OLS)估计的影响，主要有三点:</p>
<ol class="arabic simple">
<li><p>回归系数的 OLS 估计量仍然是无偏的、一致的、并且不影响𝑅2和调整的𝑅2。</p></li>
<li><p>回归标准差的估计不再是无偏的，从而回归系数 OLS 估计量的方差不再是无偏的， OLS 估计量不再是有效的和渐近有效的。</p></li>
<li><p>𝑡统计量不服从𝑡分布，𝐹统计量也不服从𝐹分布，从而无法进行假设检验和区间估计， 也无法进行区间预测。</p></li>
</ol>
<p>对于模型是否存在异方差的检验，可以采用 Breusch-Pagan test 或者 White test 两种方法</p>
</section>
<section id="id13">
<h3>多元线性回归<a class="headerlink" href="#id13" title="Link to this heading">#</a></h3>
<p>做完异方差分析处理之后，就可以正式进行多元线性回归，估计每期因子的收益序列。
$<span class="math notranslate nohighlight">\(
\widetilde{r}_j^t = \sum^s_{s=1}X_{js}*\widetilde{f_s^t}+X_{jk}^t*\widetilde{f_k^t}+\widetilde{u_j^t}\\
\widetilde{r}_j^t:股票j在第t期的收益率\\
X_{js}^t:股票j在第t期在行业s上的暴露\\
\widetilde{f_s^t}:行业s在第t期的收益率\\
X_{jk}^t:股票j在第t期在因子k上的暴露\\
\widetilde{f_k^t}:因子k在第t期的收益率\\
\widetilde{u_j^t}:股票j的残差收益率
\)</span>$
经典回归模型的基本假设:</p>
<ol class="arabic simple">
<li><p>参数的线性性:回归模型对于参数而言是线性的;</p></li>
<li><p>样本的随机性:样本是从总体中随机抽样得到的;</p></li>
<li><p>不存在完全共线性:每个解释变量具有一定变异并且自变量之间不存在完全的线性相
关关系;</p></li>
<li><p>零条件均值:<span class="math notranslate nohighlight">\(E({u_j}|X_{j1},X_{j2},\cdots,X_{jK})=\sigma^2\)</span>;</p></li>
<li><p>同方差性:<span class="math notranslate nohighlight">\(Var({u_j}|X_{j1},X_{j2},\cdots,X_{jK})=\sigma^2\)</span>;</p></li>
<li><p>正态性:<span class="math notranslate nohighlight">\(u_j\)</span>独立于所有变量，并且<span class="math notranslate nohighlight">\(u_j\sim{}N(0,\sigma^2)\)</span>。</p></li>
</ol>
</section>
<section id="id14">
<h3>估计因子预期收益率<a class="headerlink" href="#id14" title="Link to this heading">#</a></h3>
<p>多元线性回归，我们可以得到所有因子的历史收益率序列（<span class="math notranslate nohighlight">\(\widetilde{f_k^t}, k=1,2,3,\cdots,K\)</span>;<span class="math notranslate nohighlight">\(t=1,2,3,\cdots,T\)</span>):
$<span class="math notranslate nohighlight">\(
\rho^t=
\begin{bmatrix}
{\widetilde{f_1^1}}&amp;{\widetilde{f_2^1}}&amp;{\cdots}&amp;{\widetilde{f_K^1}}\\
{\widetilde{f_1^2}}&amp;{\widetilde{f_2^2}}&amp;{\cdots}&amp;{{\cdots}}\\
{\vdots}&amp;{\vdots}&amp;{\ddots}&amp;{\vdots}\\
{\widetilde{f_1^T}}&amp;\dots&amp;{\dots}&amp;{\widetilde{f_K^T}}\end{bmatrix}
\)</span><span class="math notranslate nohighlight">\(
对于\)</span>T+1$期因子的预期收益率的估计，有以下几种方法：</p>
<ol class="arabic">
<li><p>历史均值法：用前𝑁期因子历史收益率的均值作为𝑇 + 1期因子的预期收益率，
$<span class="math notranslate nohighlight">\(
\widetilde{f_K^{T+1}} = \frac{\sum^T_{t=T-N+1}f_K^t}{N}
\)</span>$
一般情况下，𝑁的取值为36或者60，即前36个月或者60个月的均值;</p></li>
<li><p>时间序列预测方法：</p>
<p>AR(q)，自回归模型(Auto-regress, AR): 变量在时刻<span class="math notranslate nohighlight">\(t\)</span>的取值<span class="math notranslate nohighlight">\(x(t)\)</span>依赖于变量<span class="math notranslate nohighlight">\(q\)</span>个历史取值<span class="math notranslate nohighlight">\({x(t-1),x(t-2),\cdots,x(t-q)}\)</span>的加总和以及一个随机输入项<span class="math notranslate nohighlight">\(e(t)\)</span>:
$<span class="math notranslate nohighlight">\(
x(t) = a_0+a_1*x(t-1)+\cdots+a_q*x(t-q)+e(t)
\)</span><span class="math notranslate nohighlight">\(
𝑀𝐴(𝑝)，移动平均模型(MovingAverage，MA):变量在时刻𝑡的取值等于𝑝+1个 (独立的)随机输入𝑒(𝑡), 𝑒(𝑡 − 1), ⋯ , 𝑒(𝑡 − 𝑝)的加权平均之和: 
\)</span><span class="math notranslate nohighlight">\(
x(t) = e(t)+c_1*e(t-1)+\cdots+c_p*e(t-p)+c_0
\)</span><span class="math notranslate nohighlight">\(
 𝐴𝑅𝑀𝐴(𝑞, 𝑝)，自回归移动平均模型(Auto-Regress Moving Average，ARMA): 是𝐴𝑅(𝑞)和𝑀𝐴(𝑝)的组合。 
\)</span><span class="math notranslate nohighlight">\(
x(t) = a_0 + a_1*(t-1)+\cdots+a_q*x(t-q)\\+e(t)+c_1*e(t-1)+\cdots+c_p*e(t-p)
\)</span>$
自回归积分滑动平均模型(Autoregressive Integrated Moving Average Model, ARIMA)，是 ARMA 模型在时间序列一阶差分上的应用;</p>
</li>
</ol>
</section>
<section id="id15">
<h3>计算股票预期收益<a class="headerlink" href="#id15" title="Link to this heading">#</a></h3>
<p>估算出T+1期的因子收益率向量(<span class="math notranslate nohighlight">\(\widetilde{f_1^{T+1}}, \widetilde{f_2^{T+1}},\cdots,\widetilde{f_K^{T+1}}\)</span>)后，以及计算出<span class="math notranslate nohighlight">\(T+1\)</span>期的因子载荷矩阵：
$<span class="math notranslate nohighlight">\(
X^{T+1}=
\begin{bmatrix}
{{X_{11}^{T+1}}}&amp;{{X_{12}^{T+1}}}&amp;{\cdots}&amp;{{X_{1K}^{T+1}}}\\
{{X_{21}^{T+1}}}&amp;{{X_{22}^{T+1}}}&amp;{\cdots}&amp;{{\cdots}}\\
{\vdots}&amp;{\vdots}&amp;{\ddots}&amp;{\vdots}\\
{{X_{N1}^{T+1}}}&amp;\dots&amp;{\dots}&amp;{{X_{NK}^{T+1}}}\end{bmatrix}
\)</span><span class="math notranslate nohighlight">\(
接下来可以计算出:
\)</span><span class="math notranslate nohighlight">\(
\widetilde{r_j^{T+1}}=\sum_{K=1}^K{X_{jk}^{T+1}}*\widetilde{f_K^{T+1}}
\)</span><span class="math notranslate nohighlight">\(
计算出T+1期每只股票的预期收益率向量(\)</span>\widetilde{r_1^{T+1}}, \widetilde{r_2^{T+1}},\cdots,\widetilde{r_N^{T+1}}$).</p>
</section>
<section id="id16">
<h3>多因子模型的风险分解<a class="headerlink" href="#id16" title="Link to this heading">#</a></h3>
<p>多因子风险模型的主要观点是，股票的收益率可以被一组共同因子和一个仅与该股票有关的 特异因子解释，即任何股票的收益率来自两个方面:共同(因子)部分，特异部分。多因子 模型通过对于共同(因子)部分的定量建模，将投资的聚焦点从股票转移至因子，即从原来 的对股票的收益和风险管理，变成对于因子的收益和风险管理。</p>
<p>从组合的角度而言，如果设置有业绩基准，那么组合收益率可以分成:</p>
<ol class="arabic simple">
<li><p>业绩基准收益率;</p></li>
<li><p>主动收益率(主动超额收益率)。</p></li>
</ol>
<p>主动收益率可以进一步细分成:</p>
<ol class="arabic simple">
<li><p>因子主动收益率(共同部分);</p></li>
<li><p>特定主动收益率(特异部分)。</p></li>
</ol>
<p>因子主动收益率可以再细分成:</p>
<ol class="arabic simple">
<li><p>市场因子收益率;</p></li>
<li><p>行业因子收益率;</p></li>
<li><p>风格因子收益率。</p></li>
</ol>
<p>在多因子模型中，股票对于市场因子的因子暴露统一为1，对于行业因子的因子暴露是一个 0 − 1哑变量(如果股票属于某一行业为1，否则为0)。由于多因子模型本质上是一个统计套 利模型，不适合对市场因子和行业因子进行收益预测和风险管理。</p>
<p>因此目前国内市场上多因 子模型最流行的用法是:</p>
<ol class="arabic simple">
<li><p>通过股指期货对冲组合的市场风险(市值对冲);</p></li>
<li><p>通过行业中性对冲组合的行业风险(以业绩基准的行业权重为基准进行对齐，即组合
在每个行业上的权重分配与业绩基准一致)。</p></li>
</ol>
</section>
</section>
<section id="id17">
<h2>投资组合风险预测<a class="headerlink" href="#id17" title="Link to this heading">#</a></h2>
</section>
</section>
<section id="id18">
<h1>优化模型<a class="headerlink" href="#id18" title="Link to this heading">#</a></h1>
<section id="id19">
<h2>二次规划<a class="headerlink" href="#id19" title="Link to this heading">#</a></h2>
<p>第𝑇 + 1期的股票预期收益、因子收益协方差矩阵、预期残差风险，都计算出来之后，关于
股票的预期风险和收益的基础数据就全部得到了。接下来需要做的就是在这些数据的基础上，
结合投资组合的风险-收益目标，以及各种约束条件，进行股票选择和权重分配。</p>
<p>对于投资组合的优化问题，一般可以采用二次规划的方法构建符合目标的投资组合。
$<span class="math notranslate nohighlight">\(
\min_H\frac{1}{2}*H^T*Q*H+H^T*c\\
s.t.A^T*H\le{b}\\
H:目标向量\\
Q:最优化问题的二次项系数的对称半正定矩阵\\
c:线性目标方程有关的系数向量\\
A:为约束等式与非等式的系数矩阵\\
b:约束值的向量矩阵
\)</span>$
二次与线性最优化的问题都可以通过一般二次规划最优化程序来解决。对于线性最优化问题，
只要令𝑄 = 0，则问题就变成一个线性规划问题。对于二次最优化而言，要使用恰当的𝑄。</p>
</section>
<section id="id20">
<h2>收益目标和风险目标<a class="headerlink" href="#id20" title="Link to this heading">#</a></h2>
<p>站在投资者的角度，都是希望收益越高越好，风险越低越好。但是投资的收益和风险是两个 矛盾的目标，无法同时满足。实际操作中有两种形式:</p>
<ol class="arabic simple">
<li><p>将预期风险控制在一定水平之下，选择投资组合使得期望收益最大;</p></li>
<li><p>在预期收益不低于某一特定水平的条件下，选择投资组合使得预期风险最小。</p></li>
</ol>
<p>要求解的目标是投资组合𝑃的权重向量h𝑃 ，组合的预期收益率;
$<span class="math notranslate nohighlight">\(
\widetilde{r_P^{T+1}} = \sum^N_{j=1}{r_j^{T+1}}*h_j
\)</span><span class="math notranslate nohighlight">\(
组合的预期风险为：
\)</span><span class="math notranslate nohighlight">\(
\sigma^2=x_P^T*F*x_P+h_P^T*\Delta*h_P=h_P^T*V*h_P
\)</span><span class="math notranslate nohighlight">\(
股票权重总和为1:
\)</span><span class="math notranslate nohighlight">\(
\sum_{j=1}^Nh_j=1,h_j\ge0,j=1,2,\cdots,N
\)</span>$</p>
<p>控制风险，最大化收益:
$<span class="math notranslate nohighlight">\(
\max_{h_j}\sum^N_{j=1}{r_j^{T+1}}*h_j\\
s.t. h_P^T*V*h_P\le\sigma^2\\
\)</span><span class="math notranslate nohighlight">\(
保证收益，最小化风险:
\)</span><span class="math notranslate nohighlight">\(
\min_{h_p}h_P^T*V*h_P\\
s.t.\sum_{j=1}^N\widetilde{r_j^{T+1}}*h_j\ge{r}
\)</span>$</p>
<p>个股上下限约束：
$<span class="math notranslate nohighlight">\(
\sum_{j=1}^Nh_{PAj}=0,h_j^{upper}\ge{h_{PAj}}\ge-h_{Bj},j=1,2,\cdots,N
\)</span><span class="math notranslate nohighlight">\(
对于任意股票，其行业哑变量的值要么为0，要么为1，所有股票的哑变量矩阵S：
\)</span><span class="math notranslate nohighlight">\(
行业哑变量矩阵S =
\begin{bmatrix}
{S_{11}}&amp;{S_{12}}&amp;{\cdots}&amp;{S_{1S}}\\
{S_{21}}&amp;{S_{22}}&amp;{\cdots}&amp;{\cdots}\\
{\vdots}&amp;{\vdots}&amp;{\ddots}&amp;{\vdots}\\
{S_{N1}}&amp;\dots&amp;{\dots}&amp;{S_{NS}}\end{bmatrix}
\)</span><span class="math notranslate nohighlight">\(
行业权重约束：
\)</span><span class="math notranslate nohighlight">\(
\sum_{j=1}^Nh_{PAj}*S_{ji}=0,j=1,2,\cdots,N
\)</span><span class="math notranslate nohighlight">\(
因子k暴露上线为\)</span>x_k<span class="math notranslate nohighlight">\(：
\)</span><span class="math notranslate nohighlight">\(
|\sum^N_{j=1}{h_{PA}}*X_{jk}|\le{x_K}
\)</span>$</p>
</section>
</section>
<section id="reference">
<h1>Reference<a class="headerlink" href="#reference" title="Link to this heading">#</a></h1>
<p>Richard Tortoriello, Quantitative Strategies for Achieving Alpha, Charpter 1</p>
<p>investopedia.com, https://www.investopedia.com/terms/m/multifactor-model.asp</p>
<p>Joseph Cernigli, Frank Fabozzi, Academic, Practitioner, and Investor Perspectives on Factor Investing, 􏱦􏱺􏱻􏲍2018􏲎</p>
<p>股票多因子模型的回归检验, https://zhuanlan.zhihu.com/p/40984029</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Quant/TraditionalMFM"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">资本资产定价模型CAPM</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#mfm">多因子模型MFM</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">历史上有哪些主流的多因子模型？</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">如何比较不同的多因子模型？</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">多因子模型的风险</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">多因子模型风险分解</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#alpha">什么是Alpha?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">多因子模型的构建</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">因子的准备</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">数据采集</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">数据标准化</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">有效因子</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#t">因子收益率序列<span class="math notranslate nohighlight">\(t\)</span>检验</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ic">因子IC值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">因子打分法回测</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">共线性的问题</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">残差异方差分析</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">多元线性回归</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">估计因子预期收益率</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">计算股票预期收益</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">多因子模型的风险分解</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">投资组合风险预测</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">优化模型</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">二次规划</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">收益目标和风险目标</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#reference">Reference</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By FinX Lab
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>